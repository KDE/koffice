
KDE_CXXFLAGS = $(USE_RTTI)
INCLUDES = $(KOFFICE_INCLUDES) -I$(top_srcdir)/lib/kformula \
	$(KOTEXT_INCLUDES) $(all_includes)

kde_module_LTLIBRARIES = libkwordpart.la

## The part
libkwordpart_la_SOURCES = kwfactory.cc kwdoc.cc kwview.cc kwcanvas.cc  \
                kwviewmode.cc \
		kwtextparag.cc kwtextdocument.cc \
		kwframe.cc kwtextframeset.cc \
                kwtableframeset.cc kwtextimage.cc kwanchor.cc \
                kwdrag.cc kwconfig.cc \
		paragdia.cc searchdia.cc \
		framedia.cc kcharselectdia.cc kwutils.cc preview.cc \
                tabledia.cc insdia.cc deldia.cc docstruct.cc \
                contents.cc stylist.cc \
                resizehandles.cc kwcommand.cc \
		autoformat.cc autoformatdia.cc fontdia.cc \
		variable.cc variabledlgs.cc serialletter.cc \
		kwchangecasedia.cc kweditpersonnalexpressiondia.cc \
		splitcellsdia.cc kwinsertpicdia.cc kwunit.cc \
		kwinsertlink.cc

libkwordpart_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN)
libkwordpart_la_LIBADD = $(LIB_KOFFICEUI) $(LIB_KOTEXT) ../lib/kformula/libkformula.la -lkspell
METASOURCES = AUTO

lib_LTLIBRARIES = kword.la libkwserialletter_interface.la

## The serial letter interface library
libkwserialletter_interface_la_SOURCES = serialletter_interface.cc
libkwserialletter_interface_la_LDFLAGS = $(all_libraries) -version-info 4:0 -no-undefined
libkwserialletter_interface_la_LIBADD = $(LIB_QT)

## The kdeinit loadable module
kword_la_SOURCES = main.cc
kword_la_LDFLAGS = $(all_libraries) -avoid-version -module
kword_la_LIBADD = ../lib/kofficecore/libkofficecore.la

## The executable
bin_PROGRAMS = kword
kword_SOURCES = dummy.cc
kword_LDFLAGS = $(all_libraries) $(KDE_RPATH)
kword_LDADD = kword.la

dummy.cc:
	echo > dummy.cc

kdelnk_DATA = kword.desktop
kdelnkdir = $(kde_appsdir)/Office

kdemime_DATA = x-kword.desktop
kdemimedir = $(kde_mimedir)/application

rcdir = $(kde_datadir)/kword
rc_DATA = kword.rc

SUBDIRS = . serialletter toolbar templates dtd pics expression autocorrect

messages: rc.cpp
	perl ../kspread/extracti18n expression/*.xml > xml_doc.cc
	$(XGETTEXT) rc.cpp *.cc kwaboutdata.h -o $(podir)/kword.pot
	-rm xml_doc.cc
