KDE_CXXFLAGS = $(USE_RTTI)
INCLUDES  = $(KOFFICE_INCLUDES) $(KOTEXT_INCLUDES) -I$(interfacedir) \
	-I$(srcdir)/dialogs \
	$(KOSCRIPT_INCLUDES) -I$(top_srcdir)/interfaces \
	 -I$(top_srcdir)/kchart/kdchart $(all_includes)

lib_LTLIBRARIES = 
kde_module_LTLIBRARIES = libkspreadpart.la

## The part
libkspreadpart_la_SOURCES =  \
        digest.cc \
        commands.cc \
        kspread_autofill.cc \
        kspread_canvas.cc \
        kspread_cell.cc \
        kspread_cluster.cc \
        kspread_condition.cc \
        kspread_doc.cc \
        kspread_depend.cc \
        kspread_editors.cc  \
        kspread_events.cc  \
        kspread_factory.cc \
        kspread_format.cc \
        kspread_functions.cc \
        kspread_functions_conversion.cc \
        kspread_functions_database.cc \
        kspread_functions_datetime.cc \
        kspread_functions_engineering.cc \
        kspread_functions_financial.cc \
        kspread_functions_helper.cc \
        kspread_functions_information.cc \
        kspread_functions_logic.cc \
        kspread_functions_math.cc \
        kspread_functions_reference.cc \
        kspread_functions_statistical.cc \
        kspread_functions_text.cc \
        kspread_functions_trig.cc  \
        kspread_handler.cc \
        kspread_interpreter.cc \
        kspread_layout.cc \
        kspread_locale.cc \
        kspread_map.cc \
        kspread_numformat.cc \
        kspread_selection.cc \
        kspread_style.cc  \
        kspread_style_manager.cc \
        kspread_undo.cc  \
        kspread_value.cc  \
        kspread_view.cc  \
        kspread_sheet.cc \
        kspread_sheetprint.cc \
        kspread_util.cc  \
        KSpreadAppIface.cc  \
        KSpreadAppIface.skel  \
        KSpreadCellIface.cc \
        KSpreadCellIface.skel \
        KSpreadColumnIface.skel \
        KSpreadColumnIface.cc \
        KSpreadDocIface.cc \
        KSpreadDocIface.skel  \
        KSpreadLayoutIface.skel \
        KSpreadLayoutIface.cc \
        KSpreadMapIface.cc \
        KSpreadMapIface.skel \
        KSpreadRowIface.skel \
        KSpreadRowIface.cc \
        KSpreadTableIface.cc \
        KSpreadTableIface.skel \
        KSpreadViewIface.skel \
        KSpreadViewIface.cc

libkspreadpart_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN)
libkspreadpart_la_LIBADD = $(top_builddir)/interfaces/libkochart.la \
	dialogs/libdialogs.la \
	$(LIB_KOSCRIPT) $(LIB_KOFFICEUI) $(LIB_KOTEXT) -lkspell

METASOURCES = AUTO

## The kdeinit loadable module and the executable
kdeinit_LTLIBRARIES = kspread.la
bin_PROGRAMS =
kspread_la_SOURCES = main.cc
kspread_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
kspread_la_LIBADD = $(LIB_KOFFICECORE)

kdelnk_DATA = kspread.desktop
kdelnkdir = $(kde_appsdir)/Office

kde_services_DATA = kspreadpart.desktop

rcdir = $(kde_datadir)/kspread
rc_DATA = kspread.rc kspread_readonly.rc

SUBDIRS = dialogs . plugins pics dtd toolbar extensions tablestyles templates

parser:
	flex lex.l
	yacc -d yacc.y
	flex -Pdep lex.dep.l
	bison -p dep -b dep -d yacc.dep.y

messages: rc.cpp
	perl extracti18n extensions/*.xml > xml_doc.cc
	$(EXTRACTRC) dialogs/*.ui >> rc.cpp
	$(XGETTEXT) rc.cpp *.cc kspread_aboutdata.h dialogs/*.cc -o $(podir)/kspread.pot
	-rm xml_doc.cc
